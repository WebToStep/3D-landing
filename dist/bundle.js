(()=>{"use strict";var e=function(e){var t,n=document.querySelector("#timer-hours"),r=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds"),a=function(){var t=(new Date(e).getTime()-(new Date).getTime())/1e3,a=("0"+Math.floor(t%60)).slice(-2),i=("0"+Math.floor(t/60%60)).slice(-2),c=("0"+Math.floor(t/60/60)).slice(-2);return n.textContent=c,r.textContent=i,o.textContent=a,t};a()>0?t=setInterval(a,1e3):(clearInterval(t),n.textContent="00",r.textContent="00",o.textContent="00")};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r,o,a,i,c,s,l,u,m,d,v=function(){function e(n){var r,o=n.selector,a=n.pattern,i=void 0===a?{}:a,c=n.method,s=n.errorMessage;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.querySelector(o),this.pattern=i,this.method=c,this.elementsForm=(r=this.form.elements,function(e){if(Array.isArray(e))return t(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})),this.errorMessage=s}var r,o;return r=e,(o=[{key:"init",value:function(){var e=this;this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(t){t.addEventListener("input",e.checkIt.bind(e)),t.addEventListener("blur",(function(){t.getAttribute("id").includes("name")&&1===t.value.length&&(t.value="",e.showError(t,e.errorMessage)),t.getAttribute("id").includes("email")&&(t.value.match(/^\w+@\w+\.\w{2,}$/gi)||(t.value="",e.showError(t,e.errorMessage)))}))}))}},{key:"isValid",value:function(e){var t=this,n={notEmpty:function(e){return""!==e.value.trim()},pattern:function(e,t){return t.test(e.value)}};if(this.method){var r=this.method[e.id];if(r)return r.every((function(r){return n[r[0]](e,t.pattern[r[1]])}))}else console.warn("Необходимо передать id полей ввода и методы проверки этих полей!");return!0}},{key:"checkIt",value:function(e){var t=e.target;this.isValid(t)?this.isValid(t)&&this.showSuccess(t):(t.value="",this.showError(t,this.errorMessage))}},{key:"showError",value:function(e,t){var n;e.classList.remove("success"),e.classList.add("error");var r=document.createElement("div");r.textContent=t?t[e.id]:"Ошибка в поле"+e.placeholder.toLowerCase(),r.classList.add("validator-error"),document.body.querySelector(".validator-error")?(document.body.querySelector(".validator-error").remove(),clearTimeout(n),this.showError(e,this.errorMessage)):(document.body.append(r),n=setTimeout((function(){r.classList.add("active"),setTimeout((function(){r.classList.add("hide"),setTimeout((function(){r.remove()}),4e3)}),3e3)}),10))}},{key:"showSuccess",value:function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var e=document.createElement("style");e.textContent="\n      input.success{\n         border: 2px solid #4CAF50 !important;\n      }\n      input.error{\n         border: 2px solid #af4c4c !important;\n         background: #ffd1d1 !important;\n      }\n      .validator-error{\n        position:fixed !important;\n        right: 20px !important;\n        bottom: 20px !important;\n         background: #fff;\n         padding:5px 10px;\n         width: 200px;\n         min-height: 50px;\n         margin: 0px auto;\n         text-align: center; \n         border-radius: 0 2px 2px 0;\n         border-left: 3px solid #af4c4c;\n         font-size:12px;\n         fontFamily: sans-serif;\n         color:#af4c4c; \n         background: #ffd1d1 !important;\n         opacity: 1 !important;\n         transform: translateY(150%) !important;\n         transition: 1s transform, opacity 4s;\n         z-index:1000;\n        }\n        .validator-error.active{\n          transform: translateY(0) !important;\n        display:unset;\n      }\n      .validator-error.hide{\n        opacity: 0 !important;\n      display:unset;\n    }",document.head.appendChild(e)}},{key:"setPattern",value:function(){this.pattern.phone||(this.pattern.phone=/^\+?[78]([-()]*\d){10}$/gi),this.pattern.email||(this.pattern.email=/^\w+@\w+\.\w{2,}$/gi)}}])&&n(r.prototype,o),e}(),f=new v({selector:"#form1",pattern:{name:/[а-я ]/gi,email:/[\w\s\S@]/gi,phone:/[0-9+]/gi},method:{"form1-name":[["notEmpty"],["pattern","name"]],"form1-phone":[["notEmpty"],["pattern","phone"]],"form1-email":[["notEmpty"],["pattern","email"]]},errorMessage:{"form1-name":"Имя должно быть более 2х символов, Русского алфавита","form1-phone":"Телефон может содержать только цифры и знак +","form1-email":"email должен содержать знак @ и название домена(.ru, .com и тд.)"}}),p=new v({selector:"#form2",pattern:{name:/[а-я ]/gi,email:/[\w\s\S@]/gi,phone:/[0-9+]/gi,text:/[\w\s\S-.?!)(,:]/gi},method:{"form2-name":[["notEmpty"],["pattern","name"]],"form2-phone":[["notEmpty"],["pattern","phone"]],"form2-email":[["notEmpty"],["pattern","email"]],"form2-message":[["notEmpty"],["pattern","text"]]},errorMessage:{"form2-name":"Имя должно быть более 2х символов, Русского алфавита","form2-phone":"Телефон может содержать только цифры и знак +","form2-email":"email должен содержать знак @ и название домена(.ru, .com и тд.)"}}),h=new v({selector:"#form3",pattern:{name:/[а-я ]/gi,email:/[\w\s\S@]/gi,phone:/[0-9+]/gi},method:{"form3-name":[["notEmpty"],["pattern","name"]],"form3-phone":[["notEmpty"],["pattern","phone"]],"form3-email":[["notEmpty"],["pattern","email"]]},errorMessage:{"form3-name":"Имя должно быть более 2х символов, Русского алфавита","form3-phone":"Телефон может содержать только цифры и знак +","form3-email":"email должен содержать знак @ и название домена(.ru, .com и тд.)"}});void 0===localStorage.startTimer?(localStorage.startTimer=(r=new Date,1,(o=new Date(r)).setDate(o.getDate()+1),o),e(localStorage.startTimer)):e(localStorage.startTimer),d=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;"active-menu"===d.className&&t.closest("a")?(e.preventDefault(),d.classList.toggle("active-menu")):"active-menu"!==d.className&&t.closest(".menu")?d.classList.toggle("active-menu"):"active-menu"!==d.className||t.closest("menu")||d.classList.toggle("active-menu")})),u=document.querySelector(".popup"),m=document.querySelector(".popup-content"),document.querySelectorAll(".popup-btn").forEach((function(e){e.addEventListener("click",(function(){if(u.style.display="block",screen.width>768){var e=-60,t=0;m.style.opacity=t,function n(){var r=requestAnimationFrame(n);e<=10?(e+=10,t+=.13,m.style.top=e+"%",m.style.opacity=t):cancelAnimationFrame(r)}()}var n=function e(t){"popup"!==t.target.className&&"popup-close"!==t.target.className||(u.style.display="none",u.removeEventListener("click",e))};u.addEventListener("click",(function(e){return n(e)}))}))})),document.querySelectorAll("a").forEach((function(e){var t=e.hash;"#"===e.hash[0]&&"#close"!==e.hash&&e.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})}))})),c=document.querySelector(".service-header"),s=document.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab"),c.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab")).classList.contains("service-header-tab")&&s.forEach((function(e,n){e===t&&function(e){for(var t=0;t<l.length;t++)e===t?(s[t].classList.add("active"),l[t].classList.remove("d-none")):(s[t].classList.remove("active"),l[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),r=document.querySelector(".portfolio-dots"),o=0;t.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),r.append(e)}));var a=document.querySelectorAll(".dot");a[0].classList.add("dot-active");var i=function(e,t,n){e[t].classList.remove(n)},c=function(e,t,n){e[t].classList.add(n)},s=function(){i(t,o,"portfolio-item-active"),i(a,o,"dot-active"),++o>=t.length&&(o=0),c(t,o,"portfolio-item-active"),c(a,o,"dot-active")},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(s,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(i(t,o,"portfolio-item-active"),i(a,o,"dot-active"),n.matches("#arrow-right")?o++:n.matches("#arrow-left")?o--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(o=t)})),o>=t.length&&(o=0),o<0&&(o=t.length-1),c(t,o,"portfolio-item-active"),c(a,o,"dot-active"))})),n.addEventListener("mouseover",(function(t){t.target.matches(".portfolio-btn, .dot")&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&l()})),l(3e3)}(),a=document.getElementById("command"),i=function(e){e.target.matches(".command__photo")&&(e.target.getAttribute("src")===e.target.dataset.img?e.target.setAttribute("src",e.target.dataset.img.replace(/a\.jpg/,".jpg")):e.target.src=e.target.dataset.img)},a.addEventListener("mouseover",i),a.addEventListener("mouseout",i),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),i=document.getElementById("total"),c=function(){var t,c,s,l=1,u=1,m=n.options[n.selectedIndex].value,d=+r.value;a.value>1&&(u+=(a.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),m&&d&&(t=e*m*d*u*l,c=0,s=setInterval((function(){c<t&&(c+=t/100)>t&&(i.textContent=Math.round(t),clearInterval(s)),c===t&&(i.textContent=Math.round(t),clearInterval(s)),i.textContent=Math.round(c)}),1))},s=function(e){return!(isNaN(parseFloat(e))||!isFinite(e))};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&c()})),t.addEventListener("input",(function(e){var t=e.target;t.matches("input")&&(s(t.value)||(t.value=""))}))}(100),f.init(),p.init(),h.init(),document.querySelectorAll("form").forEach((function(e){e.addEventListener("submit",(function(t){var n=document.createElement("div");n.style.cssText="font-size: 2rem;\n                                          color: #fff !important;";var r=document.createElement("section");r.innerHTML="<div class='sk-circle-bounce'>\n                                       <div class='sk-child sk-circle-1'></div>\n                                       <div class='sk-child sk-circle-2'></div>\n                                       <div class='sk-child sk-circle-3'></div>\n                                       <div class='sk-child sk-circle-4'></div>\n                                       <div class='sk-child sk-circle-5'></div>\n                                       <div class='sk-child sk-circle-6'></div>\n                                       <div class='sk-child sk-circle-7'></div>\n                                       <div class='sk-child sk-circle-8'></div>\n                                       <div class='sk-child sk-circle-9'></div>\n                                       <div class='sk-child sk-circle-10'></div>\n                                       <div class='sk-child sk-circle-11'></div>\n                                       <div class='sk-child sk-circle-12'></div>\n                                   </div>",t.preventDefault(),e.append(n),n.append(r);var o=new FormData(e),a={};o.forEach((function(e,t){return a[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)})}(a).then((function(e){if(200!==e.status)throw new Error(e.status);n.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){n.textContent="Что то пошло не так...",console.error(e)})),t.target.querySelectorAll("input").forEach((function(e){return e.value=""})),e.querySelectorAll("input").forEach((function(e){return e.classList.remove("success")})),setTimeout((function(){return n.remove()}),5e3)}))}))})();